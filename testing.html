<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Guys Night Out Yelp</title>
</head>

<body>

<div id="results"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
var settings = {
  "async": true,
  "crossDomain": true,
  "url": "https://api.yelp.com/v3/businesses/search?term=delis&latitude=37.786882&longitude=-122.399972",
  "method": "GET",
  "headers": {
    "Authorization": "Bearer,Bearer IW4bEj5QAK44Iz4Hhh-6W-Bhnu2ZeVeq33D2skL5gzeNSmBT4B-GXNJomvzTrl092Y5Kbi8MAACxwiM--g5EnXTdkdE2BPrar3jPlYqgQ2E_Uu-JiVPVYZrMcEeQXHYx",
    "cache-control": "no-cache",
    "Postman-Token": "0a97489d-1998-42a1-ac6f-44157660649a",
    "Access-Control-Allow-Origin": "*"
  }
}

$.ajax(settings).done(function (response) {
    console.log(response);
    var totalresults = data.total;
        
        
        if (totalresults > 0){
            // Display a header on the page with the number of results
            
            $('#results').append('<h5>We found' + totalresults + ' results!</h5>');
            // cycle through the JSON array of 'businesses' which was returned by the API
            
            $.each(data.businesses, function(i, item) {
                
               // Store each business's object in a variable
                var id = item.id;
                var alias = item.alias;
                var phone = item.display_phone;
                var image = item.image_url;
                var name = item.name;
                var rating = item.rating;
                var reviewcount = item.review_count;
                var address = item.location.address1;
                var city = item.location.city;
                var state = item.location.state;
                var zipcode = item.location.zip_code;
                
                // Append our result into our page
                $('#results').append('<div id="' + id + '" style="margin-top:50px;margin-bottom:50px;"><img src="' + image + '" style="width:200px;height:150px;"><br>We found <b>' + name + '</b> (' + alias + ')<br>Business ID: ' + id + '<br> Located at: ' + address + ' ' + city + ', ' + state + ' ' + zipcode + '<br>The phone number for this business is: ' + phone + '<br>This business has a rating of ' + rating + ' with ' + reviewcount + ' reviews.</div>');
            });
        } else {
            
         // If our results are 0; no businesses were returned by the JSON therefor we display on the page no results were found
            $('#results').append('<h5>We Got Nothin!</h5>');

            console.log(sushi)
        }
});
        
      // Grab the results from the API JSON return
       
        


</script>


</body>